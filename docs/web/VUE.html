<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>VUE | quan</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="repofavicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="repo/assets/css/0.styles.a40bae31.css" as="style"><link rel="preload" href="repo/assets/js/app.42a1d45a.js" as="script"><link rel="preload" href="repo/assets/js/3.52a86859.js" as="script"><link rel="preload" href="repo/assets/js/1.81d6f9cc.js" as="script"><link rel="preload" href="repo/assets/js/27.d198b37a.js" as="script"><link rel="prefetch" href="repo/assets/js/10.200dadb1.js"><link rel="prefetch" href="repo/assets/js/11.1fa9b32f.js"><link rel="prefetch" href="repo/assets/js/12.14c5e608.js"><link rel="prefetch" href="repo/assets/js/13.c4f60978.js"><link rel="prefetch" href="repo/assets/js/14.d2be65c2.js"><link rel="prefetch" href="repo/assets/js/15.790db92b.js"><link rel="prefetch" href="repo/assets/js/16.44dfbc5c.js"><link rel="prefetch" href="repo/assets/js/17.3a1fb7af.js"><link rel="prefetch" href="repo/assets/js/18.fe007363.js"><link rel="prefetch" href="repo/assets/js/19.eea0d223.js"><link rel="prefetch" href="repo/assets/js/20.80ed369f.js"><link rel="prefetch" href="repo/assets/js/21.c4e96d80.js"><link rel="prefetch" href="repo/assets/js/22.dcf778d2.js"><link rel="prefetch" href="repo/assets/js/23.5657fa39.js"><link rel="prefetch" href="repo/assets/js/24.b8425be7.js"><link rel="prefetch" href="repo/assets/js/25.3a17cad2.js"><link rel="prefetch" href="repo/assets/js/26.d9a21d10.js"><link rel="prefetch" href="repo/assets/js/28.8170a4b1.js"><link rel="prefetch" href="repo/assets/js/29.f0708a21.js"><link rel="prefetch" href="repo/assets/js/30.8f1e87b9.js"><link rel="prefetch" href="repo/assets/js/31.3d3bbadb.js"><link rel="prefetch" href="repo/assets/js/32.12ca7f22.js"><link rel="prefetch" href="repo/assets/js/4.56c78b69.js"><link rel="prefetch" href="repo/assets/js/5.5277ef7d.js"><link rel="prefetch" href="repo/assets/js/6.60006d11.js"><link rel="prefetch" href="repo/assets/js/7.ed50d35f.js"><link rel="prefetch" href="repo/assets/js/8.90ab3454.js"><link rel="prefetch" href="repo/assets/js/9.65dd8863.js">
    <link rel="stylesheet" href="repo/assets/css/0.styles.a40bae31.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-59db31b3><div data-v-59db31b3><div class="password-shadow password-wrapper-out" style="display:none;" data-v-6b182a98 data-v-59db31b3 data-v-59db31b3><h3 class="title" data-v-6b182a98>quan</h3> <p class="description" data-v-6b182a98></p> <label id="box" class="inputBox" data-v-6b182a98><input type="password" value="" data-v-6b182a98> <span data-v-6b182a98>Konck! Knock!</span> <button data-v-6b182a98>OK</button></label> <div class="footer" data-v-6b182a98><span data-v-6b182a98><i class="iconfont reco-theme" data-v-6b182a98></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6b182a98>vuePress-theme-reco</a></span> <span data-v-6b182a98><i class="iconfont reco-copyright" data-v-6b182a98></i> <a data-v-6b182a98><!---->
          
        <span data-v-6b182a98>2023 - </span>
        2024
      </a></span></div></div> <div class="hide" data-v-59db31b3><header class="navbar" data-v-59db31b3><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/repo/" class="home-link router-link-active"><img src="repologo.png" alt="quan" class="logo"> <span class="site-name">quan</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/repo/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/repo/categories/Backend/" class="nav-link"><i class="undefined"></i>
  Backend
</a></li><li class="dropdown-item"><!----> <a href="/repo/categories/CI/CD/" class="nav-link"><i class="undefined"></i>
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/repo/categories/Link/" class="nav-link"><i class="undefined"></i>
  Link
</a></li><li class="dropdown-item"><!----> <a href="/repo/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li></ul></div></div><div class="nav-item"><a href="/repo/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/repo/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/repo/docs/web/HTML.html" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/repo/docs/backend/Node.js.html" class="nav-link"><i class="undefined"></i>
  Backend
</a></li><li class="dropdown-item"><!----> <a href="/repo/docs/cicd/Git常用命令.html" class="nav-link"><i class="undefined"></i>
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/repo/docs/link/link.html" class="nav-link"><i class="undefined"></i>
  Link
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/quanKris/repo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-59db31b3></div> <aside class="sidebar" data-v-59db31b3><div class="personal-info-wrapper" data-v-1ba30565 data-v-59db31b3><img src="repoavatar.png" alt="author-avatar" class="personal-img" data-v-1ba30565> <!----> <div class="num" data-v-1ba30565><div data-v-1ba30565><h3 data-v-1ba30565>22</h3> <h6 data-v-1ba30565>Articles</h6></div> <div data-v-1ba30565><h3 data-v-1ba30565>0</h3> <h6 data-v-1ba30565>Tags</h6></div></div> <ul class="social-links" data-v-1ba30565></ul> <hr data-v-1ba30565></div> <nav class="nav-links"><div class="nav-item"><a href="/repo/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/repo/categories/Backend/" class="nav-link"><i class="undefined"></i>
  Backend
</a></li><li class="dropdown-item"><!----> <a href="/repo/categories/CI/CD/" class="nav-link"><i class="undefined"></i>
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/repo/categories/Link/" class="nav-link"><i class="undefined"></i>
  Link
</a></li><li class="dropdown-item"><!----> <a href="/repo/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li></ul></div></div><div class="nav-item"><a href="/repo/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/repo/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Docs
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/repo/docs/web/HTML.html" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/repo/docs/backend/Node.js.html" class="nav-link"><i class="undefined"></i>
  Backend
</a></li><li class="dropdown-item"><!----> <a href="/repo/docs/cicd/Git常用命令.html" class="nav-link"><i class="undefined"></i>
  CI/CD
</a></li><li class="dropdown-item"><!----> <a href="/repo/docs/link/link.html" class="nav-link"><i class="undefined"></i>
  Link
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/quanKris/repo" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><a href="/repo/docs/web/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/repo/docs/web/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/repo/docs/web/JavaScript.html" class="sidebar-link">JavaScript</a></li><li><a href="/repo/docs/web/Jquery.html" class="sidebar-link">Jquery</a></li><li><a href="/repo/docs/web/ES6.html" class="sidebar-link">ES6</a></li><li><a href="/repo/docs/web/前端工程化工具.html" class="sidebar-link">前端工程化工具</a></li><li><a href="/repo/docs/web/VUE.html" aria-current="page" class="active sidebar-link">VUE</a></li><li><a href="/repo/docs/web/vue3.html" class="sidebar-link">VUE3</a></li><li><a href="/repo/docs/web/辞海.html" class="sidebar-link">辞海</a></li><li><a href="/repo/docs/web/小程序开发.html" class="sidebar-link">小程序</a></li><li><a href="/repo/docs/web/Vuepress语法.html" class="sidebar-link">Vuepress语法</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-6b182a98 data-v-59db31b3><h3 class="title" data-v-6b182a98>VUE</h3> <!----> <label id="box" class="inputBox" data-v-6b182a98><input type="password" value="" data-v-6b182a98> <span data-v-6b182a98>Konck! Knock!</span> <button data-v-6b182a98>OK</button></label> <div class="footer" data-v-6b182a98><span data-v-6b182a98><i class="iconfont reco-theme" data-v-6b182a98></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-6b182a98>vuePress-theme-reco</a></span> <span data-v-6b182a98><i class="iconfont reco-copyright" data-v-6b182a98></i> <a data-v-6b182a98><!---->
          
        <span data-v-6b182a98>2023 - </span>
        2024
      </a></span></div></div> <div data-v-59db31b3><div data-v-59db31b3><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">VUE</h1> <div data-v-6b133a58><!----> <i class="iconfont reco-date" data-v-6b133a58><span data-v-6b133a58>5/29/2020</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="_1-nodejs-创建静态服务器"><a href="#_1-nodejs-创建静态服务器" class="header-anchor">#</a> <strong>1. nodejs 创建静态服务器？</strong></h2> <p>​	<code>http.createServer((req,res)=&gt;{res.writeHead(),res.write(),res.end()}).listen(3000)</code></p> <h2 id="_2-commonjs规范-vs-es6-模块化规范"><a href="#_2-commonjs规范-vs-es6-模块化规范" class="header-anchor">#</a> <strong>2. commonJS规范 vs ES6 模块化规范</strong></h2> <div class="language- extra-class"><pre><code>&gt; require导入， module.exports 导出
import 导入， export default 导出
</code></pre></div><blockquote><p>区别：import {某个几个接口} from 'antd'  //webpack  (tree shaking 摇树优化)
var myview = require(&quot;antd&quot;) //导入整个接口</p></blockquote> <h2 id="_3-socket通信-聊天"><a href="#_3-socket通信-聊天" class="header-anchor">#</a> <strong>3. socket通信 聊天</strong></h2> <p><code>websocket全双工, 双向通信 onopen onmessage onclose onerror</code></p> <ul><li>http 应用层协议， 区别：http 单向 ， 请求响应模型， XHR编程接口</li> <li>TCP双向通信传输层协议，socket编程接口</li></ul> <h2 id="_4-mongodb-基本操作-增删改查"><a href="#_4-mongodb-基本操作-增删改查" class="header-anchor">#</a> <strong>4. mongoDB 基本操作(增删改查)</strong></h2> <ul><li>mysql 区别- 关系型， 非关系型</li> <li>mongoose --（model schema ）</li></ul> <h2 id="_5-express-进行项目构建"><a href="#_5-express-进行项目构建" class="header-anchor">#</a> <strong>5. express 进行项目构建</strong></h2> <p><code>nodejs一个框架 （express, koa, egg）</code></p> <h2 id="_6-token-jwt-json-web-token-与-session配合cookie-登录-鉴权"><a href="#_6-token-jwt-json-web-token-与-session配合cookie-登录-鉴权" class="header-anchor">#</a> <strong>6. token（jwt-json web token） 与 session配合cookie  （登录，鉴权）</strong></h2> <h2 id="_7-mvvm-mvc-mvvm-mvp"><a href="#_7-mvvm-mvc-mvvm-mvp" class="header-anchor">#</a> <strong>7. MVVM - mvc mvvm mvp</strong></h2> <p>Vue是一套构建用户界面的渐进式的自底向上增量开发的MVVM框架，核心是关注视图层，vue的核心是为了解决数据的绑定问题，为了开发大型单页面应用和组件化，所以vue的核心思想是数据驱动和组件化，这里也说一下MVVM思想，MVVM思想是 模型  视图  vm是v和m连接的桥梁，当模型层数据修改时，VM层会检测到，并通知视图层进行相应修改。</p> <p>ViewModel负责把Model的数据同步到View显示出来，还负责把View的修改同步回Model，View 和 Model 之间的同步工作完全是自动的，无需人为干涉（由viewModel完成），因此开发者只需关注业务逻辑，不需要手动操作DOM, 不需要关注数据状态的同步问题</p> <p><u>MVC和MVVM的区别并不是VM完全取代了C，只是在MVC的基础上增加了一层VM，只不过是弱化了C的概念，ViewModel 存在目的在于抽离 Controller 中展示的业务逻辑，而不是替代 Controller</u></p> <p><strong>MVC的特点</strong></p> <p>MVC模式的特点在于实现关注点分离，即应用程序中的数据模型与业务和展示逻辑解耦。在客户端web开发中，就是将模型(M-数据、操作数据)、视图(V-显示数据的HTML元素)之间实现代码分离，松散耦合，使之成为一个更容易开发、维护和测试的客户端应用程序。</p> <p>View 传送指令到 Controller ；
Controller 完成业务逻辑后，要求 Model 改变状态 ；
Model 将新的数据发送到 View，用户得到反馈。</p> <p><strong>MVVM模式的优点</strong></p> <p>1、低耦合：MVVM模式中，数据是独立于UI的，ViewModel只负责处理和提供数据，UI想怎么处理数据都由UI自己决定，ViewModel不涉及任何和UI相关的事，即使控件改变（input换成p）,ViewModel几乎不需要更改任何代码，专注自己的数据处理就可以了</p> <p>2.自动同步数据:ViewModel通过双向数据绑定把View层和Model层连接了起来，View和Model这两者可以自动同步。程序员不需要手动操作DOM, 不需要关注数据状态的同步问题，MVVM 统一管理了复杂的数据状态维护</p> <p>3、可重用性：你可以把一些视图逻辑放在一个ViewModel里面，让很多view重用这段视图逻辑。</p> <p>4、独立开发：开发人员可以专注于业务逻辑和数据的开发（ViewModel），设计人员可以专注于页面设计。</p> <p>5、可测试：ViewModel里面是数据和业务逻辑，View中关注的是UI，这样的做测试是很方便的，完全没有彼此的依赖，不管是UI的单元测试还是业务逻辑的单元测试，都是低耦合的</p> <p><strong>MVVM模式与MVC模式的区别</strong></p> <p>mvc 和 mvvm 其实区别并不大。都是一种设计思想，主要区别如下：</p> <p>mvc中model层和controller层中间搭桥梁，这个桥梁便是viewmodel，</p> <p>1.mvc 中 Controller演变成 mvvm 中的 viewModel</p> <p>2.mvvm 通过数据来驱动视图层的显示而不是节点操作。</p> <p>3.mvc中Model和View是可以直接打交道的，造成Model层和View层之间的耦合度高。而mvvm中Model和View不直接交互，而是通过中间桥梁ViewModel来同步</p> <p>4.mvvm主要解决了:mvc中大量的DOM 操作使页面渲染性能降低，加载速度变慢，影响用户体验。</p> <h2 id="_8-vue双向数据绑定原理"><a href="#_8-vue双向数据绑定原理" class="header-anchor">#</a> <strong>8. vue双向数据绑定原理</strong></h2> <ul><li>Object.defineProperty() get set, watcher , render = &gt; 虚拟dom 对比老的vdom , diff</li> <li>vue3.0  数据绑定 es6 proxy , new Proxy(obj,&quot;name&quot;,{get })</li> <li>vue响应式也叫作数据双向绑定，大致原理阐述：
首先我们需要通过Object.defineProperty()方法把数据(data)设置为getter和setter的访问形式，getter中收集依赖，在setter中触发依赖，这样我们就可以在数据被修改时在setter方法设置监视修改页面信息，也就是说每当数据被修改，就会触发对应的set方法，然后我们可以在set方法中去调用操作dom的方法。
此外，如果页面有input用v-model绑定数据，我们需要在这种绑定了data的input元素上添加监听，添加input事件监听，每当input事件被触发时，就修改对应的data。
注：vue3.0版本用的是代理对象（new Proxy()）来做响应式的，我们访问数据访问的是代理对象的数据。</li> <li><img src="https://img-blog.csdnimg.cn/20210108140237683.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2hvdWd1YW5nemhhbw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"> <strong>具体步骤</strong></li></ul> <ol><li>需要observer的数据对象进行递归遍历，包括子属性对象的属性，都加上 setter和getter
这样的话，给这个对象的某个值赋值，就会触发setter，那么就能监听到了数据变化</li> <li>compile解析模板指令，将模板中的变量替换成数据，然后初始化渲染页面视图，并将每个指令对应的节点绑定更新函数，添加监听数据的订阅者，一旦数据有变动，收到通知，更新视图</li> <li>Watcher订阅者是Observer和Compile之间通信的桥梁，主要做的事情是:
(1)在自身实例化时往属性订阅器(dep)里面添加自己
(2)自身必须有一个update()方法
(3)待属性变动dep.notice()通知时，能调用自身的update()方法，并触发Compile中绑定的回调，则功成身退。</li> <li>MVVM作为数据绑定的入口，整合Observer、Compile和Watcher三者，通过Observer来监听自己的model数据变化，通过Compile来解析编译模板指令，最终利用Watcher搭起Observer和Compile之间的通信桥梁，达到数据变化 -&gt; 视图更新；视图交互变化(input) -&gt; 数据model变更的双向绑定效果。</li></ol> <h2 id="_9-vue-过滤器"><a href="#_9-vue-过滤器" class="header-anchor">#</a> <strong>9. vue - 过滤器</strong></h2> <p><code>数据的格式化，vue.filter())，计算属性(模糊查询， 购物车金额计算)，watch (监听路由改变) , 方法</code></p> <h2 id="_10-watch监听-computed计算属性"><a href="#_10-watch监听-computed计算属性" class="header-anchor">#</a> <strong>10.watch监听 computed计算属性</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 1. watch 监听，深度监听</span>
<span class="token comment">// watch的简单的用法：</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;cityName&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#root'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">cityName</span><span class="token operator">:</span> <span class="token string">'shanghai'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">cityName</span><span class="token punctuation">(</span><span class="token parameter">newName<span class="token punctuation">,</span> oldName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 直接写一个监听处理函数，当每次监听到 cityName 值发生改变时，执行函数。</span>
	  <span class="token comment">// 也可以在所监听的数据后面直接加字符串形式的方法名：</span>
	  <span class="token comment">// cityName: 'nameChange'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//watch深度监听：</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;cityName.name&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'/root'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">cityName</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'shanghai'</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{</span>
<span class="token comment">// *******************************监听整个对象**********************************//</span>
    <span class="token literal-property property">cityName</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newName<span class="token punctuation">,</span> oldName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// deep: true 则可以监听到cityName.name的变化</span>
    <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//immediate表示在watch中首次绑定的时候，是否执行handler，值为true则表示在watch中声明的时候，就立即执行handler方法</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ****************************监听对象中的一个属性值******************************//</span>
<span class="token comment">// 如果只需要监听对象中的一个属性值，则可以做以下优化：使用字符串的形式监听对象属性：</span>
    <span class="token string-property property">'cityName.name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">newName<span class="token punctuation">,</span> oldName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 2. 计算属性</span>
<span class="token comment">//作用：==当依赖的属性的值发生变化的时候，才会触发他的更改，如果依赖的值，不发生变化的时候，使用的是缓存中的属性值。==</span>
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;example&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Original message<span class="token operator">:</span> <span class="token string">&quot;{{ message }}&quot;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Computed reversed message<span class="token operator">:</span> <span class="token string">&quot;{{ reversedMessage }}&quot;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  
<span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'/example'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Hello'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 计算属性的 getter</span>
    <span class="token function-variable function">reversedMessage</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// `this` 指向 vm 实例</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><h2 id="_11-vue指令有哪些"><a href="#_11-vue指令有哪些" class="header-anchor">#</a> <strong>11.vue指令有哪些</strong></h2> <p><code>v-if v-for v-else v-model v-html v-bind v-on v-show v-slot...</code></p> <h2 id="_11-1虚拟dom"><a href="#_11-1虚拟dom" class="header-anchor">#</a> <strong>11.1虚拟dom</strong></h2> <p>vdom 就是用 js 对象来描述真实 DOM，本质上就是在JS和DOM之间的一个缓存；由于直接操作 DOM 性能低，但是 js 层的操作效率高，可以将 DOM 操作转化成对象操作，最终通过diff算法比对差异进行更新DOM (减少了对真实DOM的操作)。虚拟DOM不依赖真实平台环境从而也可以实现跨平台。</p> <p>优点：</p> <p>1、保证性能下限：可以保证在你不需要手动优化的情况下，依然可以提供还不错的性能；
2、无需手动操作dom：极大提高我们的开发效率；
3、跨平台：虚拟 DOM 本质上是 JavaScript 对象；</p> <p>缺点：</p> <p>无法进行极致优化： 在一些性能要求极高的应用中虚拟DOM无法进行针对性的极致优化</p> <p><strong>11.2keep-alive</strong></p> <p>keep-alive 主要是组件缓存，采用的是LRU算法。
常用的两个属性 include（要缓存的）/ exclude（不要缓存的），允许组件有条件的进行缓存；都可以用逗号分隔字符串、正则表达式或一个数组来表示
因为keep-alive会将组件保存在内存中，并不会销毁以及重新创建，所以不会重新调用组件的created等方法，所以它自己有两个生命周期activated / deactivated，用来得知当前组件是否处于活跃状态。</p> <p><strong>11.3keep-alive</strong></p> <h2 id="_11-3vue-中的-sync语法糖"><a href="#_11-3vue-中的-sync语法糖" class="header-anchor">#</a> <a href="https://www.cnblogs.com/wangyanhua95/p/8706147.html" target="_blank" rel="noopener noreferrer"><strong>11.3vue 中的.sync语法糖</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>官方对她的描述是：可以对一个prop进行双向绑定，当一个子组件改变了一个带.sync的prop的值时，这个变化也回同步到父组件所绑定的值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">currentPage</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>page
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:page'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">pageSize</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>limit
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'update:limit'</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_12-vue单文件组件"><a href="#_12-vue单文件组件" class="header-anchor">#</a> **12.vue单文件组件 **</h2> <ul><li>template</li> <li>script</li> <li>style</li></ul> <h2 id="_13-vue路由-route-router"><a href="#_13-vue路由-route-router" class="header-anchor">#</a> <strong>13.vue路由   route router</strong></h2> <h2 id="_14-route-和-router-的区别"><a href="#_14-route-和-router-的区别" class="header-anchor">#</a> <strong>14.$route 和 $router 的区别</strong></h2> <p>router为VueRouter的实例，相当于一个全局的路由器对象，里面含有很多属性和子对象，例如history对象。。。经常用的跳转链接就可以用this.$router.push，和router-link跳转一样。。。</p> <p>route相当于当前正在跳转的路由对象。。可以从里面获取name,path,params,query等。。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>它就等同于<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;...&quot;</span><span class="token operator">&gt;</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span>这个方法会向 history 栈添加一个新的记录，当用户点击浏览器后退按钮时，则回到之前的 <span class="token constant">URL</span>。该方法的参数可以是一个字符串路径，或者一个描述地址的对象。例如：
<span class="token comment">//字符串</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">)</span>
<span class="token comment">//对象</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'home'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//命名的路由</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token string">'123'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 带查询参数，变成 /register?plan=private</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'register'</span><span class="token punctuation">,</span> <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">plan</span><span class="token operator">:</span> <span class="token string">'private'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> userId <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> userId <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// -&gt;    /user/123</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// -&gt;    /user/123</span>


<span class="token number">1</span><span class="token punctuation">.</span>query方式传参和接收参数
<span class="token literal-property property">传参</span><span class="token operator">:</span> 
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span><span class="token string">'/xxx'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">query</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span>id
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token literal-property property">接收参数</span><span class="token operator">:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>id

<span class="token number">2</span><span class="token punctuation">.</span>params方式传参和接收参数
<span class="token literal-property property">传参</span><span class="token operator">:</span> 
<span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'xxx'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">params</span><span class="token operator">:</span><span class="token punctuation">{</span>
          <span class="token literal-property property">id</span><span class="token operator">:</span>id
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token literal-property property">接收参数</span><span class="token operator">:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>注意:params传参，push里面只能是 name:‘xxxx’,不能是path:’/xxx’,因为params只能用name来引入路由，如果这里写成了path，接收参数页面会是undefined！！！</p> <p>另外，二者还有点区别，直白的来说query相当于get请求，页面跳转的时候，可以在地址栏看到请求参数，而params相当于post请求，参数不会再地址栏中显示</p> <p><strong>路由两种模式</strong>：</p> <ul><li>hash(window.onhashchange)</li> <li>history (window.onpopstate)</li></ul> <p><strong>全局导航钩子主要有两种钩子：前置守卫、后置钩子，</strong></p> <p>注册一个全局前置守卫：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// do someting</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这三个参数 to 、from 、next 分别的作用：</p> <p>to: Route，代表要进入的目标，它是一个路由对象</p> <p>from: Route，代表当前正要离开的路由，同样也是一个路由对象</p> <p>next: Function，这是一个必须需要调用的方法，而具体的执行效果则依赖 next 方法调用的参数</p> <p>a. next()：进入管道中的下一个钩子，如果全部的钩子执行完了，则导航的状态就是 confirmed（确认的）
b. next(false)：这代表中断掉当前的导航，即 to 代表的路由对象不会进入，被中断，此时该表 URL 地址会被重置到 from 路由对应的地址
c. next(‘/’) 和 next({path: ‘/’})：在中断掉当前导航的同时，跳转到一个不同的地址
d. next(error)：如果传入参数是一个 Error 实例，那么导航被终止的同时会将错误传递给 router.onError() 注册过的回调</p> <p>注意：next 方法必须要调用，否则钩子函数无法 resolved</p> <h2 id="_15-vuex基本模块-state-actions-mutations-getters"><a href="#_15-vuex基本模块-state-actions-mutations-getters" class="header-anchor">#</a> <strong>15.vuex基本模块-state ,actions,mutations,getters</strong></h2> <p>集中式存储管理应用的所有组件的状态，而更改状态的唯一方法就是在mutaions里修改state，actions不能直接修改state，store是Vuex.Store这个构造函数new出来的实例。在构造函数中可以传一个对象参数。这个参数中可以包含5个对象：</p> <h2 id="_16-vuex异步流程-组件发送一个dispatch到action中-action做异步请求-之后提交到mutation中-mutation修改状态-组件更新"><a href="#_16-vuex异步流程-组件发送一个dispatch到action中-action做异步请求-之后提交到mutation中-mutation修改状态-组件更新" class="header-anchor">#</a> <strong>16.vuex异步流程</strong>：组件发送一个dispatch到action中，action做异步请求，之后提交到mutation中，mutation修改状态，组件更新</h2> <ol><li>state =&gt; 基本数据</li> <li>getters =&gt;state的计算属性</li> <li>mutations =&gt; 提交更改数据的方法，同步！</li> <li>actions =&gt; 把方法提交到mutation，异步操作</li> <li>modules =&gt; 将store模块化—当store很大的时候，分成模块，方便管理</li></ol> <ul><li><p>workflow？</p></li> <li><p>项目？ 非父子通信， 状态快照（缓存数据）</p></li> <li><p>store 内存， 一刷新页面没有</p></li> <li><p>调试， devtools</p></li></ul> <h2 id="_17-vue优化"><a href="#_17-vue优化" class="header-anchor">#</a> <strong>17.vue优化</strong></h2> <ul><li><p>首屏加载过慢，提供seo</p></li> <li><p>首屏加载过慢 (路由懒加载)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token keyword">import</span> Foo <span class="token keyword">from</span> <span class="token string">'./Foo'</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token keyword">var</span> <span class="token function-variable function">Foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./Foo&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//webpack code split 代码分割</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/foo'</span><span class="token punctuation">,</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Foo <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h2 id="_18-react-class组件-函数式组件"><a href="#_18-react-class组件-函数式组件" class="header-anchor">#</a> <strong>18 .React class组件， 函数式组件</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span><span class="token punctuation">{</span>
     state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
	 <span class="token function">render</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">111</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
	 <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

 	<span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">111</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 <span class="token punctuation">}</span>
 
 react 函数式组件 <span class="token function">hooks</span> <span class="token punctuation">(</span>钩住函数组件的状态<span class="token punctuation">)</span> <span class="token punctuation">,</span> useState<span class="token punctuation">,</span>useEffect	

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_19-受控组件-非受控组件"><a href="#_19-受控组件-非受控组件" class="header-anchor">#</a> <strong>19.受控组件&amp;非受控组件？</strong></h2> <blockquote><p>外部能控制组件内部状态 （属性）
tabbar
swiper</p></blockquote> <blockquote><p>既能受控还能非受控</p></blockquote> <h2 id="_20-vdom-js对象-模拟dom节点-与diff-同层级对比-key-同class-合并操作"><a href="#_20-vdom-js对象-模拟dom节点-与diff-同层级对比-key-同class-合并操作" class="header-anchor">#</a> <strong>20.vdom（js对象 模拟dom节点）与diff (同层级对比,key, 同class , 合并操作)</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count：<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>count：<span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;xiaoming&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token comment">//更新到dom, new Swiper</span>
	<span class="token comment">// this.$nextTick Vue</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">count</span><span class="token operator">:</span>prevState<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		<span class="token literal-property property">count</span><span class="token operator">:</span>prevState<span class="token punctuation">.</span>count<span class="token operator">+</span><span class="token number">1</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

多次setState 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_21-setstate-之后-react数据更新原理"><a href="#_21-setstate-之后-react数据更新原理" class="header-anchor">#</a> <strong>21.setState 之后？React数据更新原理？</strong></h2> <h2 id="_22-react按钮绑定事件"><a href="#_22-react按钮绑定事件" class="header-anchor">#</a> <strong>22. React按钮绑定事件</strong></h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

<span class="token function">handleClilck</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function-variable function">handleClilck</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>

事件与原生事件区别？  react 是代理到document 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_23-ref-dom-refdom节点-组件-ref组件对象"><a href="#_23-ref-dom-refdom节点-组件-ref组件对象" class="header-anchor">#</a> <strong>23.Ref - （dom =&gt;refdom节点， 组件=&gt;ref组件对象）</strong></h2> <blockquote><p>ref父子通信</p></blockquote> <h2 id="_24-生命周期"><a href="#_24-生命周期" class="header-anchor">#</a> <strong>24. 生命周期</strong></h2> <blockquote><p>老的</p></blockquote> <ul><li>componentWillMount</li> <li>render</li> <li>componentDidMount</li> <li>componentWillReceiveProps</li> <li>shouldComponentUpdate ? return false /true 性能优化</li> <li>componentWillUpdate</li> <li>render</li> <li>componentDidUpdate</li> <li>componentWillUnmount</li></ul> <blockquote><p>新的 Fiber</p></blockquote> <ul><li>getDerivedStateFromProps</li> <li>getSnapShotBeforeUpdate</li></ul> <h2 id="_25-父子通信以及非父子通信-context"><a href="#_25-父子通信以及非父子通信-context" class="header-anchor">#</a> <strong>25.父子通信以及非父子通信 (context)</strong></h2> <p>props 父传子  this.props.myname
callback 子传父 this.props.event()</p> <h2 id="_26-redux"><a href="#_26-redux" class="header-anchor">#</a> <strong>26.Redux</strong></h2> <ul><li>reducer</li> <li>store</li> <li>actionCreator</li> <li>Component View</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">redux原理</span><span class="token operator">:</span> 订阅发布模式
	list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
	state <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
	
	发布
	<span class="token function-variable function">dispatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			state <span class="token operator">=</span> <span class="token function">reducer</span><span class="token punctuation">(</span>prevstate<span class="token punctuation">)</span>
					<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> list<span class="token punctuation">)</span><span class="token punctuation">{</span>

						list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
	监听
	<span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

	异步？
	middleWare <span class="token operator">-</span> redux<span class="token operator">-</span>thunk redux<span class="token operator">-</span>promise redux<span class="token operator">-</span>saga

	flux <span class="token constant">VS</span> react<span class="token operator">-</span>redux <span class="token constant">VS</span> redux
		<span class="token operator">-</span> flux 架构思想 <span class="token number">15</span><span class="token function">种</span> <span class="token punctuation">(</span>facebook <span class="token function">flux</span><span class="token punctuation">(</span>vue 老太太 <span class="token punctuation">)</span><span class="token punctuation">,</span> redux <span class="token punctuation">)</span>
		<span class="token operator">-</span> redux （vue react<span class="token punctuation">,</span> angular）
		<span class="token operator">-</span> react<span class="token operator">-</span><span class="token function">redux（不用自己监听，connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 容器组件，自己叫<span class="token constant">UI</span>组件，Provider组件 ）

	react<span class="token operator">-</span><span class="token function">redux原理</span>
	<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>高阶组件 <span class="token constant">HOC</span> <span class="token function">高阶函数</span>
	<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>  <span class="token function">context</span>	<span class="token punctuation">(</span>非父子通信，provider comsumer<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_27-ant-design"><a href="#_27-ant-design" class="header-anchor">#</a> <strong>27.Ant-Design</strong></h2> <div class="language- extra-class"><pre><code> 哪些组件？ 准备几个

 Button (size, type , disabled... ) 
</code></pre></div><h2 id="_28-immutable-结构共享"><a href="#_28-immutable-结构共享" class="header-anchor">#</a> <strong>28.immutable (结构共享)</strong></h2> <ul><li>深复制？</li> <li>[...] {...} 一级深复制</li> <li>JSON.parse(JSON.stringify()) 如果name:undefined</li></ul> <h2 id="_29-mobx"><a href="#_29-mobx" class="header-anchor">#</a> <strong>29.Mobx</strong></h2> <ul><li><p>redux(普通js对象， state只读，单一store,纯函数) VS mobx(可观察对象，状态可以被修改，多个store. )</p></li> <li><p>Vuex（直接修改状态,actions, get set拦截,学习成本低） VS Redux (不能直接修改状态， middlerware， 自己subsribe, 成本高。)</p></li></ul> <h2 id="_30-vue2-3中环境变量的问题"><a href="#_30-vue2-3中环境变量的问题" class="header-anchor">#</a> <strong>30.vue2/3中环境变量的问题</strong></h2> <p>VUE2中：</p> <p>一个 Vue CLI 项目有三个模式，具体使用哪个模式就是根据环境变量 NODE_ENV 来看的：</p> <p>development 模式   test 模式   production 模式</p> <p>vue-cli-service build --mode development
--mode 后面指定的就是使用的模式，如果你根目录同名的文件（.env.[mode]），则使用这个文件中的 NODE_ENV，如果没找到就使用 --mode 后面的作为模式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token constant">VUE_APP_</span> 开头的变量会被 webpack<span class="token punctuation">.</span>DefinePlugin 静态嵌入到客户端侧的包中。你可以在应用的代码中这样访问它们：console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_SECRET</span><span class="token punctuation">)</span>

关于<span class="token constant">HTML</span> 插值
被 html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin 处理的模板
<span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token constant">VALUE</span> <span class="token operator">%</span><span class="token operator">&gt;</span> 用来做不转义插值；
<span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> <span class="token constant">VALUE</span> <span class="token operator">%</span><span class="token operator">&gt;</span> 用来做 <span class="token constant">HTML</span> 转义插值；
<span class="token operator">&lt;</span><span class="token operator">%</span> expression <span class="token operator">%</span><span class="token operator">&gt;</span> 用来描述 JavaScript 流程控制。
<span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token constant">BASE_URL</span> <span class="token operator">%</span><span class="token operator">&gt;</span> 环境变量的使用


配置举例说明：
<span class="token comment">// 本地环境：.env.local</span>
<span class="token constant">NODE_ENV</span><span class="token operator">=</span>development
<span class="token constant">BRANCH_ENV</span><span class="token operator">=</span>feature
<span class="token constant">VUE_APP_ENV</span><span class="token operator">=</span>local

<span class="token comment">// 集成开发环境：.env.dev</span>
<span class="token constant">NODE_ENV</span><span class="token operator">=</span>production
<span class="token constant">BRANCH_ENV</span><span class="token operator">=</span>dev
<span class="token constant">VUE_APP_ENV</span><span class="token operator">=</span>development

<span class="token comment">// 测试环境：.env.test</span>
<span class="token constant">NODE_ENV</span><span class="token operator">=</span>production
<span class="token constant">BRANCH_ENV</span><span class="token operator">=</span>test
<span class="token constant">VUE_APP_ENV</span><span class="token operator">=</span>test

<span class="token comment">// 预发环境：.env.uat</span>
<span class="token constant">NODE_ENV</span><span class="token operator">=</span>production
<span class="token constant">BRANCH_ENV</span><span class="token operator">=</span>uat
<span class="token constant">VUE_APP_ENV</span><span class="token operator">=</span>uat

<span class="token comment">// 生产环境：.env.prd</span>
<span class="token constant">NODE_ENV</span><span class="token operator">=</span>production
<span class="token constant">BRANCH_ENV</span><span class="token operator">=</span>master
<span class="token constant">VUE_APP_ENV</span><span class="token operator">=</span>production


<span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string-property property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve --mode local&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build:dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode dev&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build:test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode test&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build:uat&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode uat&quot;</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;build:prd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode prd&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
  <span class="token operator">--</span>mode 后面是什么就去找什么对应配置文件
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><p>VUE3中：</p> <p>还是像 vuecli 那样建立不同的 .env.[mode] 文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 以下是所有地方都可使用的环境变量</span>
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MODE</span><span class="token operator">:</span> <span class="token punctuation">{</span>string<span class="token punctuation">}</span> 应用运行的模式。
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">BASE_URL</span><span class="token operator">:</span> <span class="token punctuation">{</span>string<span class="token punctuation">}</span> 部署应用时的基本 <span class="token constant">URL</span>。他由base 配置项决定。
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PROD</span><span class="token operator">:</span> <span class="token punctuation">{</span>boolean<span class="token punctuation">}</span> 应用是否运行在生产环境。
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DEV</span><span class="token operator">:</span> <span class="token punctuation">{</span>boolean<span class="token punctuation">}</span> <span class="token function">应用是否运行在开发环境</span> <span class="token punctuation">(</span>永远与 <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PROD</span>相反<span class="token punctuation">)</span>。
<span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">SSR</span><span class="token operator">:</span> <span class="token punctuation">{</span>boolean<span class="token punctuation">}</span> 应用是否运行在 server 上。

在 index<span class="token punctuation">.</span>html 中使用环境变量
在 vuecli 中是可以直接用的，但是在 vite 中需要插件来支持。
npm i vite<span class="token operator">-</span>plugin<span class="token operator">-</span>html <span class="token operator">-</span><span class="token constant">D</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig<span class="token punctuation">,</span> loadEnv <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createHtmlPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vite-plugin-html&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> command<span class="token punctuation">,</span> mode <span class="token punctuation">}</span><span class="token operator">:</span> ConfigEnv<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">UserConfig</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// mode: production | test | development     --mode对应值</span>
    <span class="token comment">// command: build | server</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这样就已经可以在 html 中使用环境变量了</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">createHtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 如果还想另外注入一些环境变量，如这里的 title，可以用如下方式</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">createHtmlPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token function">getViteEnv</span><span class="token punctuation">(</span>mode<span class="token punctuation">,</span> <span class="token string">&quot;VITE_APP_TITLE&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">getViteEnv</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">mode<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">loadEnv</span><span class="token punctuation">(</span>mode<span class="token punctuation">,</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

html中：
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">%=</span> title <span class="token operator">%</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="_31-vue中封装dialog组件-全局使用-可避免缓存"><a href="#_31-vue中封装dialog组件-全局使用-可避免缓存" class="header-anchor">#</a> <strong>31.vue中封装dialog组件，全局使用，可避免缓存</strong></h2> <div class="custom-block tip"><p class="title">大致思路</p><p>$dialog触发，用mixin将传入的弹窗内的页面和dialog组件混入，生成新的元素，手动push在页面中，之后open()方法，创建一个promise函数，resovle和reject控制事件，在接口正常传递，需要将弹窗关闭的时候，close方法调用，resolve返回所需value值（可选），如果cancel弹窗或者点击弹窗外侧，触发dialog的visible = false，dialog组件中的computed监听到后，执行dismiss命令，走catch后，finally清除组件，注意，回调后弹窗消失和主动让弹窗消失，都是依靠dialog的finally事件，清除dialog元素，避免缓存。</p></div><p>通过main.js注册全局</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> dialog <span class="token keyword">from</span> <span class="token string">'./utils/dialog'</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$dialog <span class="token operator">=</span> dialog
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>dialog.js文件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> dialogMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resolve<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>val<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>resolve <span class="token operator">=</span> resolve
        <span class="token keyword">this</span><span class="token punctuation">.</span>reject <span class="token operator">=</span> reject
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">$close</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resolve<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>resolve <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">$dismiss</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>reject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>reject <span class="token operator">=</span> <span class="token keyword">null</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">dialog</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">component<span class="token punctuation">,</span> opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  component <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> component<span class="token punctuation">)</span>
  component<span class="token punctuation">.</span>mixins <span class="token operator">=</span> <span class="token punctuation">[</span>dialogMixin<span class="token punctuation">]</span>

  <span class="token keyword">const</span> Constructor <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span>
  <span class="token keyword">const</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Constructor</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">propsData</span><span class="token operator">:</span> opts <span class="token punctuation">}</span><span class="token punctuation">)</span>
  vm<span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
      <span class="token keyword">if</span> <span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'MSIE'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> navigator<span class="token punctuation">.</span>appVersion<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'Trident/'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        vm<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// destroy after dialog faded out</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          vm<span class="token punctuation">.</span><span class="token function">$destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> dialog

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br></div></div><p>触发初始化dialog部分：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> uploadDialog <span class="token keyword">from</span> <span class="token string">'./uploadDialog.vue'</span>
<span class="token function">handleUpload</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$dialog</span><span class="token punctuation">(</span>uploadDialog<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetAndQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>uploadDialog 为业务弹窗组件，自行引入</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-dialog</span>
    <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>title<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:visible.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>visible<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>400px<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">custom-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>upload-file-dialog<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 此处为业务组件，我们只关心cancel和confirm部分的逻辑 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog-footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$dismiss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Cancel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleConfirm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Confirm<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-dialog</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleConfirm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token function">uploadFile</span><span class="token punctuation">(</span>params<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> data
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$close</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2/19/2024, 5:52:41 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/repo/docs/web/前端工程化工具.html" class="prev">
          前端工程化工具
        </a></span> <span class="next"><a href="/repo/docs/web/vue3.html">
          VUE3
        </a></span></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-f541bbc4 data-v-59db31b3><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_1-nodejs-创建静态服务器" class="sidebar-link reco-side-_1-nodejs-创建静态服务器" data-v-f541bbc4>1. nodejs 创建静态服务器？</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_2-commonjs规范-vs-es6-模块化规范" class="sidebar-link reco-side-_2-commonjs规范-vs-es6-模块化规范" data-v-f541bbc4>2. commonJS规范 vs ES6 模块化规范</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_3-socket通信-聊天" class="sidebar-link reco-side-_3-socket通信-聊天" data-v-f541bbc4>3. socket通信 聊天</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_4-mongodb-基本操作-增删改查" class="sidebar-link reco-side-_4-mongodb-基本操作-增删改查" data-v-f541bbc4>4. mongoDB 基本操作(增删改查)</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_5-express-进行项目构建" class="sidebar-link reco-side-_5-express-进行项目构建" data-v-f541bbc4>5. express 进行项目构建</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_6-token-jwt-json-web-token-与-session配合cookie-登录-鉴权" class="sidebar-link reco-side-_6-token-jwt-json-web-token-与-session配合cookie-登录-鉴权" data-v-f541bbc4>6. token（jwt-json web token） 与 session配合cookie  （登录，鉴权）</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_7-mvvm-mvc-mvvm-mvp" class="sidebar-link reco-side-_7-mvvm-mvc-mvvm-mvp" data-v-f541bbc4>7. MVVM - mvc mvvm mvp</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_8-vue双向数据绑定原理" class="sidebar-link reco-side-_8-vue双向数据绑定原理" data-v-f541bbc4>8. vue双向数据绑定原理</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_9-vue-过滤器" class="sidebar-link reco-side-_9-vue-过滤器" data-v-f541bbc4>9. vue - 过滤器</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_10-watch监听-computed计算属性" class="sidebar-link reco-side-_10-watch监听-computed计算属性" data-v-f541bbc4>10.watch监听 computed计算属性</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_11-vue指令有哪些" class="sidebar-link reco-side-_11-vue指令有哪些" data-v-f541bbc4>11.vue指令有哪些</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_11-1虚拟dom" class="sidebar-link reco-side-_11-1虚拟dom" data-v-f541bbc4>11.1虚拟dom</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_11-3vue-中的-sync语法糖" class="sidebar-link reco-side-_11-3vue-中的-sync语法糖" data-v-f541bbc4>11.3vue 中的.sync语法糖</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_12-vue单文件组件" class="sidebar-link reco-side-_12-vue单文件组件" data-v-f541bbc4>12.vue单文件组件</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_13-vue路由-route-router" class="sidebar-link reco-side-_13-vue路由-route-router" data-v-f541bbc4>13.vue路由   route router</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_14-route-和-router-的区别" class="sidebar-link reco-side-_14-route-和-router-的区别" data-v-f541bbc4>14.$route 和 $router 的区别</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_15-vuex基本模块-state-actions-mutations-getters" class="sidebar-link reco-side-_15-vuex基本模块-state-actions-mutations-getters" data-v-f541bbc4>15.vuex基本模块-state ,actions,mutations,getters</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_16-vuex异步流程-组件发送一个dispatch到action中-action做异步请求-之后提交到mutation中-mutation修改状态-组件更新" class="sidebar-link reco-side-_16-vuex异步流程-组件发送一个dispatch到action中-action做异步请求-之后提交到mutation中-mutation修改状态-组件更新" data-v-f541bbc4>16.vuex异步流程：组件发送一个dispatch到action中，action做异步请求，之后提交到mutation中，mutation修改状态，组件更新</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_17-vue优化" class="sidebar-link reco-side-_17-vue优化" data-v-f541bbc4>17.vue优化</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_18-react-class组件-函数式组件" class="sidebar-link reco-side-_18-react-class组件-函数式组件" data-v-f541bbc4>18 .React class组件， 函数式组件</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_19-受控组件-非受控组件" class="sidebar-link reco-side-_19-受控组件-非受控组件" data-v-f541bbc4>19.受控组件&amp;非受控组件？</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_20-vdom-js对象-模拟dom节点-与diff-同层级对比-key-同class-合并操作" class="sidebar-link reco-side-_20-vdom-js对象-模拟dom节点-与diff-同层级对比-key-同class-合并操作" data-v-f541bbc4>20.vdom（js对象 模拟dom节点）与diff (同层级对比,key, 同class , 合并操作)</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_21-setstate-之后-react数据更新原理" class="sidebar-link reco-side-_21-setstate-之后-react数据更新原理" data-v-f541bbc4>21.setState 之后？React数据更新原理？</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_22-react按钮绑定事件" class="sidebar-link reco-side-_22-react按钮绑定事件" data-v-f541bbc4>22. React按钮绑定事件</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_23-ref-dom-refdom节点-组件-ref组件对象" class="sidebar-link reco-side-_23-ref-dom-refdom节点-组件-ref组件对象" data-v-f541bbc4>23.Ref - （dom =&gt;refdom节点， 组件=&gt;ref组件对象）</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_24-生命周期" class="sidebar-link reco-side-_24-生命周期" data-v-f541bbc4>24. 生命周期</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_25-父子通信以及非父子通信-context" class="sidebar-link reco-side-_25-父子通信以及非父子通信-context" data-v-f541bbc4>25.父子通信以及非父子通信 (context)</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_26-redux" class="sidebar-link reco-side-_26-redux" data-v-f541bbc4>26.Redux</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_27-ant-design" class="sidebar-link reco-side-_27-ant-design" data-v-f541bbc4>27.Ant-Design</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_28-immutable-结构共享" class="sidebar-link reco-side-_28-immutable-结构共享" data-v-f541bbc4>28.immutable (结构共享)</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_29-mobx" class="sidebar-link reco-side-_29-mobx" data-v-f541bbc4>29.Mobx</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_30-vue2-3中环境变量的问题" class="sidebar-link reco-side-_30-vue2-3中环境变量的问题" data-v-f541bbc4>30.vue2/3中环境变量的问题</a></li><li class="level-2" data-v-f541bbc4><a href="/repo/docs/web/VUE.html#_31-vue中封装dialog组件-全局使用-可避免缓存" class="sidebar-link reco-side-_31-vue中封装dialog组件-全局使用-可避免缓存" data-v-f541bbc4>31.vue中封装dialog组件，全局使用，可避免缓存</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-03eee03a data-v-03eee03a><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-03eee03a><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-03eee03a></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-03eee03a></path></svg></div></div></div>
    <script src="repo/assets/js/app.42a1d45a.js" defer></script><script src="repo/assets/js/3.52a86859.js" defer></script><script src="repo/assets/js/1.81d6f9cc.js" defer></script><script src="repo/assets/js/27.d198b37a.js" defer></script>
  </body>
</html>
