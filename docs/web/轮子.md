---
title: 造轮子
date: 2024-03-29
categories: 
 - Web
---
<!-- [[TOC]] -->

<p><a HREF="https://uniapp.dcloud.net.cn/">https://uniapp.dcloud.net.cn/</a></p>

## Switch滑块

```html
<div class="switch-container">
    <input type="checkbox" id="switch-checkbox" class="switch-checkbox" style="display:none;">
    <label for="switch-checkbox" class="switch"></label>
</div>
```
```js
<script type="text/javascript">
$(function() {
    $('.switch-checkbox').change(function() {
        if ($(this).is(':checked')) {
            console.log("Switch is ON");
        } else {
            console.log("Switch is OFF");
        }
    });
});
</script>
```
```css
.switch-container {
    display: flex;
    align-items: center;

    .switch-checkbox:checked+.switch::after {
        transform: translateX(21px);
    }

    .switch-checkbox:checked+.switch {
        background-color: #4f5671;
    }

    .switch {
        width: 40px;
        height: 19px;
        background-color: #ccc;
        display: inline-block;
        position: relative;
        cursor: pointer;
        border-radius: 15px;

        &::after {
            content: '';
            width: 15px;
            height: 15px;
            background-color: #fff;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s, background-color 0.3s;
        }
    }
}
```

## Pagenation 分页

```html
<div class="frontend_nav">
   <nav aria-label="Page navigation">
       <ul class="frontend_pagination" id="frontend_pagination">
           <!-- Pagination links will be appended here -->
       </ul>
   </nav>
   <span class="total_count">Total: {{ total }}</span>
</div>
```

```js
//走接口去调数据，并触发页数更新
statusDecision = (type, current_page = 1) ->
  $.blockUI message: "<p class='margin-1'>#{SusyConfig.image.loading}   Loading ...</p>"
  decision_status_values = $("#decision_status_#{type}").val()
  decision_type_values = $("#decision_type_#{type}").val()
  $(".decision_status_onchange").val(decision_status_values)
  $(".decision_type_onchange").val(decision_type_values)
  decision_status_onchange = $(".decision_status_onchange").val()
  decision_type_onchange = $(".decision_type_onchange").val()
  $.get $('.user_history').data('url'),
    decision_status_onchange: decision_status_onchange
    decision_type_onchange: decision_type_onchange
    type: type
    page:current_page,
    (res) ->
      $(".row_history").remove()
      $(".user_history").append(res.data)
      $('.user_history').attr 'data-total', res.count
      $('.total_count').text('Total: '+ res.count)
      $(".frontend_pagination").empty()
      updatePagination(res.count, current_page)
      $.unblockUI()
// 计算当前页和总页数的关系，控制显示的页码
generatePagination = (totalPages, currentPage) ->
  maxPagesToShow = 5  
  $(".frontend_pagination").empty()
  
  if totalPages <= maxPagesToShow
    for i in [1..totalPages]
      isActive = if i is currentPage then 'active' else ''
      $(".frontend_pagination").append("<li class=\"page-item #{isActive}  \"><a class=\"page-link\" href=\"#\" data-page=\"#{i}\">#{i}</a></li>")
  else
    $(".frontend_pagination").append("<li class=\"page-item #{'active' if 1 is currentPage}  \"><a class=\"page-link\" href=\"#\" data-page=\"1\">1</a></li>")
    startPage = Math.max(2, currentPage - Math.floor(maxPagesToShow / 2))
    endPage = Math.min(totalPages, startPage + maxPagesToShow - 1)
    endPage = endPage-1 if endPage == totalPages
    if startPage > 2
      $(".frontend_pagination").append("<li class=\"page-item disabled\"><a class=\"page-link\" href=\"#\">...</a></li>")
  
    for i in [startPage..endPage]
      isActive = if i is currentPage then 'active' else ''
      $(".frontend_pagination").append("<li class=\"page-item #{isActive}  \"><a class=\"page-link\" href=\"#\" data-page=\"#{i}\">#{i}</a></li>")
    if endPage < totalPages-1
      $(".frontend_pagination").append("<li class=\"page-item disabled\"><a class=\"page-link\" href=\"#\">...</a></li>")
    $(".frontend_pagination").append("<li class=\"page-item #{'active' if totalPages is currentPage}  \"><a class=\"page-link\" href=\"#\" data-page=\"#{totalPages}\">#{totalPages}</a></li>")
  $(".frontend_pagination").prepend("<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data-page=\"#{currentPage - 1}\">&laquo;</a></li>")  if    currentPage > 1
  $(".frontend_pagination").append("<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data-page=\"#{currentPage + 1}\">&raquo;</a></li>") if     currentPage < totalPages

// 数据返回总页数和当前页
updatePagination = (total, currentPage) ->
  totalPages = Math.ceil(total / 10)
  $(".frontend_pagination").empty()
  generatePagination(totalPages, currentPage) if totalPages > 1

// 点击切换分页
$(document).on 'click', '.frontend_pagination a', (e) ->
  e.preventDefault()
  currentPage = $(this).data('page')
  $('.frontend_pagination li').removeClass('active')
  $(this).parent('li').addClass('active')
  statusDecision $(this).closest('.frontend_nav').siblings('.user_history').data('type') , currentPage
```

```scss
.frontend_nav {
    display: flex;
    align-items: center;
    .frontend_pagination {
        display: flex;
        justify-content: left;
        list-style: none;
        padding: 0;
        margin: 0 0 20px 0;
        li {
            margin: 0 5px;
            &.active a {
                background-color: #4f5671;
                color: #fff;
                border-color: #4f5671;
            }
        }
        a {
            display: block;
            padding: 6px 12px;
            color: #4f5671;
            text-decoration: none;
            border: 1px solid #ddd;
            border-radius: 4px;
            transition: background-color 0.3s;
            &:hover {
                background-color: #f8f9fa;
            }
        }
    }
    .total_count {
        margin-bottom: 20px;
        margin-left: 10px;
    }
}
```

## Loading 弹窗，内置外置
```js
// Jquery
$.blockUI({
  message: "<p class='margin-1'>#{SusyConfig.image.loading} Loading ...</p>"
})
$.unblockUI()
//coffeescript
$.blockUI message: "<p class='margin-1'>#{SusyConfig.image.loading}   Loading ...</p>"  
$.unblockUI()

//内置loading
var _self = $(this);
_self.prop('disabled', true);
var loadingImg = '<img src="' + SusyConfig.image_src.loading + '">';
_self.after(loadingImg);
_self.removeAttr('disabled');
_self.next('img').remove();
```